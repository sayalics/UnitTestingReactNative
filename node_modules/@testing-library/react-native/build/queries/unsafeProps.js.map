{"version":3,"file":"unsafeProps.js","names":["UNSAFE_getByProps","instance","getByPropsFn","props","findByProps","error","ErrorWithStack","prepareErrorMessage","UNSAFE_getAllByProps","getAllByPropsFn","results","findAllByProps","length","prettyFormat","UNSAFE_queryByProps","queryByPropsFn","createQueryByError","UNSAFE_queryAllByProps","bindUnsafeByPropsQueries"],"sources":["../../src/queries/unsafeProps.ts"],"sourcesContent":["import type { ReactTestInstance } from 'react-test-renderer';\nimport prettyFormat from 'pretty-format';\nimport { ErrorWithStack, prepareErrorMessage } from '../helpers/errors';\nimport { createQueryByError } from '../helpers/errors';\n\nconst UNSAFE_getByProps = (\n  instance: ReactTestInstance\n): ((props: { [propName: string]: any }) => ReactTestInstance) =>\n  function getByPropsFn(props: { [propName: string]: any }) {\n    try {\n      return instance.findByProps(props);\n    } catch (error) {\n      throw new ErrorWithStack(prepareErrorMessage(error), getByPropsFn);\n    }\n  };\n\nconst UNSAFE_getAllByProps = (\n  instance: ReactTestInstance\n): ((props: { [propName: string]: any }) => Array<ReactTestInstance>) =>\n  function getAllByPropsFn(props: { [propName: string]: any }) {\n    const results = instance.findAllByProps(props);\n    if (results.length === 0) {\n      throw new ErrorWithStack(\n        `No instances found with props:\\n${prettyFormat(props)}`,\n        getAllByPropsFn\n      );\n    }\n    return results;\n  };\n\nconst UNSAFE_queryByProps = (\n  instance: ReactTestInstance\n): ((props: { [propName: string]: any }) => ReactTestInstance | null) =>\n  function queryByPropsFn(props: { [propName: string]: any }) {\n    try {\n      return UNSAFE_getByProps(instance)(props);\n    } catch (error) {\n      return createQueryByError(error, queryByPropsFn);\n    }\n  };\n\nconst UNSAFE_queryAllByProps =\n  (\n    instance: ReactTestInstance\n  ): ((props: { [propName: string]: any }) => Array<ReactTestInstance>) =>\n  (props: { [propName: string]: any }) => {\n    try {\n      return UNSAFE_getAllByProps(instance)(props);\n    } catch (error) {\n      return [];\n    }\n  };\n\n// Unsafe aliases\nexport type UnsafeByPropsQueries = {\n  UNSAFE_getByProps: (props: { [key: string]: any }) => ReactTestInstance;\n  UNSAFE_getAllByProps: (props: {\n    [key: string]: any;\n  }) => Array<ReactTestInstance>;\n  UNSAFE_queryByProps: (props: {\n    [key: string]: any;\n  }) => ReactTestInstance | null;\n  UNSAFE_queryAllByProps: (props: {\n    [key: string]: any;\n  }) => Array<ReactTestInstance>;\n};\n\n// TODO: migrate to makeQueries pattern\nexport const bindUnsafeByPropsQueries = (\n  instance: ReactTestInstance\n): UnsafeByPropsQueries => ({\n  UNSAFE_getByProps: UNSAFE_getByProps(instance),\n  UNSAFE_getAllByProps: UNSAFE_getAllByProps(instance),\n  UNSAFE_queryByProps: UNSAFE_queryByProps(instance),\n  UNSAFE_queryAllByProps: UNSAFE_queryAllByProps(instance),\n});\n"],"mappings":";;;;;;;AACA;;AACA;;;;AAGA,MAAMA,iBAAiB,GACrBC,QADwB,IAGxB,SAASC,YAAT,CAAsBC,KAAtB,EAA0D;EACxD,IAAI;IACF,OAAOF,QAAQ,CAACG,WAAT,CAAqBD,KAArB,CAAP;EACD,CAFD,CAEE,OAAOE,KAAP,EAAc;IACd,MAAM,IAAIC,sBAAJ,CAAmB,IAAAC,2BAAA,EAAoBF,KAApB,CAAnB,EAA+CH,YAA/C,CAAN;EACD;AACF,CATH;;AAWA,MAAMM,oBAAoB,GACxBP,QAD2B,IAG3B,SAASQ,eAAT,CAAyBN,KAAzB,EAA6D;EAC3D,MAAMO,OAAO,GAAGT,QAAQ,CAACU,cAAT,CAAwBR,KAAxB,CAAhB;;EACA,IAAIO,OAAO,CAACE,MAAR,KAAmB,CAAvB,EAA0B;IACxB,MAAM,IAAIN,sBAAJ,CACH,mCAAkC,IAAAO,qBAAA,EAAaV,KAAb,CAAoB,EADnD,EAEJM,eAFI,CAAN;EAID;;EACD,OAAOC,OAAP;AACD,CAZH;;AAcA,MAAMI,mBAAmB,GACvBb,QAD0B,IAG1B,SAASc,cAAT,CAAwBZ,KAAxB,EAA4D;EAC1D,IAAI;IACF,OAAOH,iBAAiB,CAACC,QAAD,CAAjB,CAA4BE,KAA5B,CAAP;EACD,CAFD,CAEE,OAAOE,KAAP,EAAc;IACd,OAAO,IAAAW,0BAAA,EAAmBX,KAAnB,EAA0BU,cAA1B,CAAP;EACD;AACF,CATH;;AAWA,MAAME,sBAAsB,GAExBhB,QADF,IAGCE,KAAD,IAAwC;EACtC,IAAI;IACF,OAAOK,oBAAoB,CAACP,QAAD,CAApB,CAA+BE,KAA/B,CAAP;EACD,CAFD,CAEE,OAAOE,KAAP,EAAc;IACd,OAAO,EAAP;EACD;AACF,CAVH,C,CAYA;;;AAcA;AACO,MAAMa,wBAAwB,GACnCjB,QADsC,KAEZ;EAC1BD,iBAAiB,EAAEA,iBAAiB,CAACC,QAAD,CADV;EAE1BO,oBAAoB,EAAEA,oBAAoB,CAACP,QAAD,CAFhB;EAG1Ba,mBAAmB,EAAEA,mBAAmB,CAACb,QAAD,CAHd;EAI1BgB,sBAAsB,EAAEA,sBAAsB,CAAChB,QAAD;AAJpB,CAFY,CAAjC"}
{"version":3,"file":"displayValue.js","names":["getTextInputNodeByDisplayValue","node","value","options","TextInput","require","exact","normalizer","nodeValue","props","undefined","defaultValue","filterNodeByType","matches","error","createLibraryNotSupportedError","queryAllByDisplayValue","instance","queryAllByDisplayValueFn","displayValue","queryOptions","findAll","getMultipleError","String","getMissingError","getBy","getAllBy","queryBy","queryAllBy","findBy","findAllBy","makeQueries","bindByDisplayValueQueries","getByDisplayValue","getAllByDisplayValue","queryByDisplayValue","findByDisplayValue","findAllByDisplayValue"],"sources":["../../src/queries/displayValue.ts"],"sourcesContent":["import type { ReactTestInstance } from 'react-test-renderer';\nimport { createLibraryNotSupportedError } from '../helpers/errors';\nimport { filterNodeByType } from '../helpers/filterNodeByType';\nimport { matches, TextMatch } from '../matches';\nimport { makeQueries } from './makeQueries';\nimport type {\n  FindAllByQuery,\n  FindByQuery,\n  GetAllByQuery,\n  GetByQuery,\n  QueryAllByQuery,\n  QueryByQuery,\n} from './makeQueries';\nimport type { TextMatchOptions } from './text';\n\nconst getTextInputNodeByDisplayValue = (\n  node: ReactTestInstance,\n  value: TextMatch,\n  options: TextMatchOptions = {}\n) => {\n  try {\n    const { TextInput } = require('react-native');\n    const { exact, normalizer } = options;\n    const nodeValue =\n      node.props.value !== undefined\n        ? node.props.value\n        : node.props.defaultValue;\n    return (\n      filterNodeByType(node, TextInput) &&\n      matches(value, nodeValue, normalizer, exact)\n    );\n  } catch (error) {\n    throw createLibraryNotSupportedError(error);\n  }\n};\n\nconst queryAllByDisplayValue = (\n  instance: ReactTestInstance\n): ((\n  displayValue: TextMatch,\n  queryOptions?: TextMatchOptions\n) => Array<ReactTestInstance>) =>\n  function queryAllByDisplayValueFn(displayValue, queryOptions) {\n    return instance.findAll((node) =>\n      getTextInputNodeByDisplayValue(node, displayValue, queryOptions)\n    );\n  };\n\nconst getMultipleError = (displayValue: TextMatch) =>\n  `Found multiple elements with display value: ${String(displayValue)} `;\nconst getMissingError = (displayValue: TextMatch) =>\n  `Unable to find an element with displayValue: ${String(displayValue)}`;\n\nconst { getBy, getAllBy, queryBy, queryAllBy, findBy, findAllBy } = makeQueries(\n  queryAllByDisplayValue,\n  getMissingError,\n  getMultipleError\n);\n\nexport type ByDisplayValueQueries = {\n  getByDisplayValue: GetByQuery<TextMatch, TextMatchOptions>;\n  getAllByDisplayValue: GetAllByQuery<TextMatch, TextMatchOptions>;\n  queryByDisplayValue: QueryByQuery<TextMatch, TextMatchOptions>;\n  queryAllByDisplayValue: QueryAllByQuery<TextMatch, TextMatchOptions>;\n  findByDisplayValue: FindByQuery<TextMatch, TextMatchOptions>;\n  findAllByDisplayValue: FindAllByQuery<TextMatch, TextMatchOptions>;\n};\n\nexport const bindByDisplayValueQueries = (\n  instance: ReactTestInstance\n): ByDisplayValueQueries => ({\n  getByDisplayValue: getBy(instance),\n  getAllByDisplayValue: getAllBy(instance),\n  queryByDisplayValue: queryBy(instance),\n  queryAllByDisplayValue: queryAllBy(instance),\n  findByDisplayValue: findBy(instance),\n  findAllByDisplayValue: findAllBy(instance),\n});\n"],"mappings":";;;;;;;AACA;;AACA;;AACA;;AACA;;AAWA,MAAMA,8BAA8B,GAAG,CACrCC,IADqC,EAErCC,KAFqC,EAGrCC,OAAyB,GAAG,EAHS,KAIlC;EACH,IAAI;IACF,MAAM;MAAEC;IAAF,IAAgBC,OAAO,CAAC,cAAD,CAA7B;;IACA,MAAM;MAAEC,KAAF;MAASC;IAAT,IAAwBJ,OAA9B;IACA,MAAMK,SAAS,GACbP,IAAI,CAACQ,KAAL,CAAWP,KAAX,KAAqBQ,SAArB,GACIT,IAAI,CAACQ,KAAL,CAAWP,KADf,GAEID,IAAI,CAACQ,KAAL,CAAWE,YAHjB;IAIA,OACE,IAAAC,kCAAA,EAAiBX,IAAjB,EAAuBG,SAAvB,KACA,IAAAS,gBAAA,EAAQX,KAAR,EAAeM,SAAf,EAA0BD,UAA1B,EAAsCD,KAAtC,CAFF;EAID,CAXD,CAWE,OAAOQ,KAAP,EAAc;IACd,MAAM,IAAAC,sCAAA,EAA+BD,KAA/B,CAAN;EACD;AACF,CAnBD;;AAqBA,MAAME,sBAAsB,GAC1BC,QAD6B,IAM7B,SAASC,wBAAT,CAAkCC,YAAlC,EAAgDC,YAAhD,EAA8D;EAC5D,OAAOH,QAAQ,CAACI,OAAT,CAAkBpB,IAAD,IACtBD,8BAA8B,CAACC,IAAD,EAAOkB,YAAP,EAAqBC,YAArB,CADzB,CAAP;AAGD,CAVH;;AAYA,MAAME,gBAAgB,GAAIH,YAAD,IACtB,+CAA8CI,MAAM,CAACJ,YAAD,CAAe,GADtE;;AAEA,MAAMK,eAAe,GAAIL,YAAD,IACrB,gDAA+CI,MAAM,CAACJ,YAAD,CAAe,EADvE;;AAGA,MAAM;EAAEM,KAAF;EAASC,QAAT;EAAmBC,OAAnB;EAA4BC,UAA5B;EAAwCC,MAAxC;EAAgDC;AAAhD,IAA8D,IAAAC,wBAAA,EAClEf,sBADkE,EAElEQ,eAFkE,EAGlEF,gBAHkE,CAApE;;AAeO,MAAMU,yBAAyB,GACpCf,QADuC,KAEZ;EAC3BgB,iBAAiB,EAAER,KAAK,CAACR,QAAD,CADG;EAE3BiB,oBAAoB,EAAER,QAAQ,CAACT,QAAD,CAFH;EAG3BkB,mBAAmB,EAAER,OAAO,CAACV,QAAD,CAHD;EAI3BD,sBAAsB,EAAEY,UAAU,CAACX,QAAD,CAJP;EAK3BmB,kBAAkB,EAAEP,MAAM,CAACZ,QAAD,CALC;EAM3BoB,qBAAqB,EAAEP,SAAS,CAACb,QAAD;AANL,CAFY,CAAlC"}